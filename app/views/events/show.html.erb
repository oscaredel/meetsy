<div class="row event-image rounded-top" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://images.unsplash.com/photo-1498940757830-82f7813bf178?ixlib=rb-1.2.1&auto=format&fit=crop&w=1267&q=80);">
  <div class="col">
    <h1><%= @event.name %></h1>
  </div>
</div>

<div class="row bg-white details py-2 rounded-bottom">
  <div class="col-md-8 description">
    <p><%= @event.description %></p>
  </div>
  <div class="col-md-4 info">
    <div class="time my-2">
      <h4 class="d-inline">🕗</h4> <%= @event.date_time.strftime("%d %B at %H:%M")    %>
    </div>
    <div class="place my-2">
      <h4 class="d-inline">📍</h4> <%= @event.location %>
    </div>
    <div class="organized-by my-2">
      <h4 class="d-inline">👩‍💻</h4> <%= @event.organiser_name %>
    </div>
    <%= link_to "edit", edit_event_path(@event), class:"btn btn-outline-warning" %>
    <%= link_to "delete",
                event_path(@event),
                class:"btn btn-outline-danger",
                method: :delete,
                data: { confirm: "Are you sure?" } %>
  </div>
</div>

<div class="row bg-white py-2 mt-5 rounded">
  <div class="col-md-8">
    <%= render 'responses/response_form' %>
  </div>

  <div class="col-md-4">

    <% if @event.responses.yes.empty? %>
      <p>nobody is attending yet</p>
    <% else %>
      <h4 class="d-inline">👋</h4> also attending
    <% end %>

    <% @event.responses.yes.each do |response| %>
      <p>
        <%= response.name %><small> <%= response.message %></small>
        <%= link_to icon('fas', 'edit'), edit_event_response_path(@event, response), class:'text-success' %>
        <%= link_to icon('fas', 'trash'), event_response_path(@event, response), method: :delete, class:'text-danger' %>
      </p>
    <% end %>


    <% unless @event.responses.maybe.empty? %>
      <h4 class="d-inline">🤞</h4> might be there
    <% end %>

    <% @event.responses.maybe.each do |response| %>
      <p>
        <%= response.name %> <small> <%= response.message %></small>
        <%= link_to icon('fas', 'edit'), edit_event_response_path(@event, response), class:'text-success' %>
        <%= link_to icon('fas', 'trash'), event_response_path(@event, response), method: :delete, class:'text-danger' %>
      </p>
    <% end %>


    <% unless @event.responses.no.empty? %>
      <h4 class="d-inline">✌️</h4> can't make it
    <% end %>

    <% @event.responses.no.each do |response| %>
      <p>
        <%= response.name %><small> <%= response.message %></small>
        <%= link_to icon('fas', 'edit'), edit_event_response_path(@event, response), class:'text-success' %>
        <%= link_to icon('fas', 'trash'), event_response_path(@event, response), method: :delete, class:'text-danger' %>
      </p>
    <% end %>

  </div>
</div>

